(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{105:function(e,t,n){e.exports={root:"home_root__QnnRv",container:"home_container__1Wapa",loader:"home_loader__2A2Ij"}},107:function(e,t,n){e.exports={item:"burger-constructor-item_item__3ZkuA"}},108:function(e,t,n){e.exports={ldsRoller:"loader_ldsRoller__3LgiI"}},109:function(e,t,n){e.exports={root:"modal-overlay_root__3Bmoz"}},13:function(e,t,n){e.exports={root:"feed_root__1pzwX",orderList:"feed_orderList__2bI7D",loader:"feed_loader__1vgjy",title:"feed_title__b9M4r",statusContainer:"feed_statusContainer__10ROa",status:"feed_status__1uvf8",info:"feed_info__3jzOr",list:"feed_list__3Guqa",done:"feed_done__30bDC",textShadow:"feed_textShadow__2nVa5"}},15:function(e,t,n){e.exports={container:"profile_container__2BbXp",form:"profile_form__3yKlC",order_list:"profile_order_list__1TR4Q",empty_order_list:"profile_empty_order_list__haOJP",buttonsContainer:"profile_buttonsContainer__2I5hQ",container_navigate:"profile_container_navigate__wvjgT",button:"profile_button__2w-9V",button_text:"profile_button_text__PHKGy",button_active:"profile_button_active__3qeHY",description:"profile_description__2Qw7N"}},18:function(e,t,n){e.exports={header:"app-header_header__1iHLW",nav:"app-header_nav__1_idE",logo:"app-header_logo__zVEfY",button:"app-header_button__1tHq1",button_text:"app-header_button_text__QpOdy",button_active:"app-header_button_active__N4rAI"}},199:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(34),s=n.n(r),i=n(44),o=n(206),l=n(26),d=n(45),u=n(2),j="https://norma.nomoreparties.space/api";function _(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[]\\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function m(e,t,n){var c=n.expires;if("number"==typeof c&&c){var a=new Date;a.setTime(a.getTime()+1e3*c),c=n.expires=a}c&&c.toUTCString&&(n.expires=c.toUTCString());var r=e+"="+(t=encodeURIComponent(t));for(var s in n){r+="; "+s;var i=n[s];!0!==i&&(r+="="+i)}document.cookie=r}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(e,null,Object(u.a)(Object(u.a)({},t),{},{expires:-1}))}var p="GET_INGREDIENTS_REQUEST",O="GET_INGREDIENTS_SUCCESS",x="GET_INGREDIENTS_FAILED",h="GET_ORDER_NUMBER_REQUEST",f="GET_ORDER_NUMBER_SUCCESS",g="GET_ORDER_NUMBER_FAILED",N="CLEAR_ORDER_NUMBER_SUCCESS",y="SET_CURRENT_INGREDIENT",v="DELETE_CURRENT_INGREDIENT",C="ADD_INGREDIENT_TO_CONSTRUCTOR",E="DELETE_INGREDIENT_FROM_CONSTRUCTOR",S="CLEAR_CONSTRUCTOR",I="ADD_BUN_TO_CONSTRUCTOR",T="DELETE_BUN_FROM_CONSTRUCTOR",k="REPLACE_INGREDIENTS",R={isRequesting:!1,isFailed:!1,ingredients:[],constructorIngredients:[],currentBun:null,currentIngredient:null,order:{orderNumber:0}},w="IS_OPEN_ORDER",D="IS_OPEN_INGREDIENT",M="IS_OPEN_ORDER_DETAILS",A=function(){return _("isOpenIngredientModal")||m("isOpenIngredientModal",!0,{}),{type:D,isOpen:!0}},F={isOpenModalOrder:!1,isOpenModalIngredient:!1,isOpenModalOrderDetails:!1},U="WS_CONNECTION_START",L="WS_CONNECTION_SUCCESS",B="WS_CONNECTION_CLOSED",P="WS_CONNECTION_ERROR",G="WS_GET_MESSAGE",W="WS_USER_CONNECTION_START",q="WS_USER_CONNECTION_SUCCESS",z="WS_USER_CONNECTION_CLOSED",J="WS_USER_CONNECTION_ERROR",H="WS_USER_GET_MESSAGE",Q="ORDER_SET_CURRENT_ORDER",V="ORDER_DELETE_CURRENT_ORDER",X={WS_CONNECTION_START:U,WS_CONNECTION_SUCCESS:L,WS_CONNECTION_CLOSED:B,WS_CONNECTION_ERROR:P,WS_GET_MESSAGE:G},Y={WS_CONNECTION_START:W,WS_CONNECTION_SUCCESS:q,WS_CONNECTION_CLOSED:z,WS_CONNECTION_ERROR:J,WS_GET_MESSAGE:H},K=function(){return{type:U}},Z=function(){return{type:B}},$=function(){return{type:W}},ee=function(){return{type:z}},te={wsConnected:!1,currentOrder:null,orders:{success:!1,total:0,totalToday:0,orders:[]}},ne="IS_REQUESTING",ce="IS_FAILED",ae="IS_SUCCESSFUL",re="SET_USER_DATA",se={isRequesting:!1,isFailed:!1,isAuth:Boolean(_("accessToken")),userData:{email:"",name:""}},ie=Object(l.b)({modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(u.a)(Object(u.a)({},e),{},{isOpenModalOrder:t.isOpen});case D:return Object(u.a)(Object(u.a)({},e),{},{isOpenModalIngredient:t.isOpen});case M:return Object(u.a)(Object(u.a)({},e),{},{isOpenModalOrderDetails:t.isOpen});default:return e}},burgerIngredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:case h:return Object(u.a)(Object(u.a)({},e),{},{isRequesting:!0,isFailed:!1});case O:return Object(u.a)(Object(u.a)({},e),{},{isRequesting:!1,isFailed:!1,ingredients:t.data});case x:return Object(u.a)(Object(u.a)({},e),{},{isRequesting:!1,isFailed:!0});case f:return Object(u.a)(Object(u.a)({},e),{},{isRequesting:!1,isFailed:!1,order:{orderNumber:t.orderNumber}});case N:return Object(u.a)(Object(u.a)({},e),{},{order:{orderNumber:0}});case g:return Object(u.a)(Object(u.a)({},e),{},{isRequesting:!1,isFailed:!0,order:{orderNumber:0}});case y:return Object(u.a)(Object(u.a)({},e),{},{currentIngredient:t.currentIngredient});case v:return Object(u.a)(Object(u.a)({},e),{},{currentIngredient:{}});case C:return Object(u.a)(Object(u.a)({},e),{},{constructorIngredients:[].concat(Object(d.a)(e.constructorIngredients),[t.draggedIngredient])});case S:return Object(u.a)(Object(u.a)({},e),{},{constructorIngredients:[]});case E:var n=e.constructorIngredients.map((function(e){return e._id})).indexOf(t.id);return Object(u.a)(Object(u.a)({},e),{},{constructorIngredients:e.constructorIngredients.filter((function(e,t){return t!==n}))});case I:return Object(u.a)(Object(u.a)({},e),{},{currentBun:t.draggedIngredient});case T:return Object(u.a)(Object(u.a)({},e),{},{currentBun:null});case k:var c=Object(d.a)(e.constructorIngredients),a=c[t.payload.dragIndex];return c.splice(t.payload.dragIndex,1),c.splice(t.payload.hoverIndex,0,a),Object(u.a)(Object(u.a)({},e),{},{constructorIngredients:c});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return Object(u.a)(Object(u.a)({},e),{},{isRequesting:!0,isFailed:!1});case ce:return Object(u.a)(Object(u.a)({},e),{},{isRequesting:!1,isFailed:!0});case ae:return Object(u.a)(Object(u.a)({},e),{},{isRequesting:!1,isAuth:t.isAuth});case re:return Object(u.a)(Object(u.a)({},e),{},{isRequesting:!1,userData:t.userData});default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:case W:return Object(u.a)({},e);case L:case q:return Object(u.a)(Object(u.a)({},e),{},{wsConnected:!0});case B:case z:return Object(u.a)(Object(u.a)({},e),{},{wsConnected:!1,orders:{success:!1,total:0,totalToday:0,orders:[]}});case P:case J:return Object(u.a)(Object(u.a)({},e),{},{wsConnected:!1});case G:case H:return Object(u.a)(Object(u.a)({},e),{},{orders:t.payload});case Q:return Object(u.a)(Object(u.a)({},e),{},{currentOrder:t.currentOrder});case V:return Object(u.a)(Object(u.a)({},e),{},{currentOrder:null});default:return e}}}),oe=n(104),le=n(111),de=["success"],ue=function(e,t,n){var c=n.checkToken;return function(n){var a=null,r=t.WS_CONNECTION_START,s=t.WS_CONNECTION_SUCCESS,i=t.WS_CONNECTION_CLOSED,o=t.WS_CONNECTION_ERROR,l=t.WS_GET_MESSAGE;return function(t){return function(d){var u=n.dispatch,j=d.type,m=_("accessToken");j===r&&(a=c&&m?new WebSocket("".concat(e).concat("?token="+m.slice(7))):new WebSocket("".concat(e))),a&&(a.onopen=function(e){u({type:s})},a.onerror=function(e){u({type:o})},a.onmessage=function(e){var t=e.data,n=JSON.parse(t),c=(n.success,Object(le.a)(n,de));u({type:l,payload:c})},a.onclose=function(e){u({type:i})}),t(d)}}}},je=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c)(Object(l.a)(oe.a,ue("wss://norma.nomoreparties.space/orders/all",X,{checkToken:!1}),ue("wss://norma.nomoreparties.space/orders",Y,{checkToken:!0}))),_e=Object(l.d)(ie,je),me=n(8),be=n(110),pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,212)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},Oe=function(){return Object(i.b)()},xe=i.c,he=n(5),fe=n(46),ge=n.n(fe),Ne=n(4),ye=n(105),ve=n.n(ye),Ce=n(7),Ee=n(47),Se=n.n(Ee),Ie=n(208),Te=n(0),ke=function(e){var t=xe((function(e){return e.burgerIngredients.constructorIngredients})).filter((function(t){return t._id===e.item._id})),n=[xe((function(e){return e.burgerIngredients.currentBun}))].filter((function(t){return t&&t._id===e.item._id})),c=Object(Ie.a)({type:"ingredient",item:e.item}),a=Object(Ce.a)(c,2)[1],r=t.length>0||n.length>0,s="bun"!==e.item.type?t.length:n.length>0?2:0;return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("li",{ref:a,className:"".concat(Se.a.card," mb-8 mr-4"),onClick:function(){return e.openModal(e.item)},children:[r&&Object(Te.jsx)("span",{className:"".concat(Se.a.count," text_type_digits-default"),children:s}),Object(Te.jsx)("img",{src:e.item.image,alt:""}),Object(Te.jsxs)("span",{className:"".concat(Se.a.price," mt-2 mb-1 text_type_digits-default"),children:[e.item.price,Object(Te.jsx)(Ne.CurrencyIcon,{type:"primary"})]}),Object(Te.jsx)("p",{className:"".concat(Se.a.name," text_type_main-default"),children:e.item.name})]},e.item._id)})},Re=n(81),we=n.n(Re),De=function(){var e=Oe(),t=Object(he.h)(),n=Object(he.g)(),a=[{name:"bun",title:"\u0411\u0443\u043b\u043a\u0438"},{name:"sauce",title:"\u0421\u043e\u0443\u0441\u044b"},{name:"main",title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}],r=Object(c.useState)(a[0].name),s=Object(Ce.a)(r,2),i=s[0],o=s[1],l=xe((function(e){return e.burgerIngredients.ingredients})),d=Object(c.useCallback)((function(c){e(A()),e({type:y,currentIngredient:c}),t("/ingredients/".concat(c._id),{state:{background:n}})}),[e,t,n]),u=Object(c.useMemo)((function(){return l.filter((function(e){return e.type===i})).map((function(e){return Object(Te.jsx)(ke,{item:e,openModal:d},e._id)}))}),[l,i,d]);return Object(Te.jsxs)("section",{children:[Object(Te.jsx)("h1",{className:"text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(Te.jsx)("div",{className:we.a.selection_header,style:{display:"flex"},children:a.map((function(e){return Object(Te.jsx)(Ne.Tab,{onClick:o,active:i===e.name,value:e.name,children:e.title},e.name)}))}),Object(Te.jsx)("ul",{className:"".concat(we.a.card_container),children:u})]})},Me=n(209),Ae=n(107),Fe=n.n(Ae),Ue=function(e){var t=Oe(),n=a.a.useRef(null),c=Object(Me.a)({accept:"constructorIngredient",hover:function(c,a){var r;if(n.current){var s=c.index,i=e.index;if(s!==i){var o=null===(r=n.current)||void 0===r?void 0:r.getBoundingClientRect(),l=(o.bottom-o.top)/2,d=a.getClientOffset().y-o.top;s<i&&d<l||s>i&&d>l||(t(function(e,t){return function(n){n({type:k,payload:{dragIndex:e,hoverIndex:t}})}}(s,i)),c.index=i)}}}}),r=Object(Ce.a)(c,2)[1],s=Object(Ie.a)({type:"constructorIngredient",item:function(){return{id:e.item._id,index:e.index}},collect:function(e){return{isDragging:e.isDragging()}}});return(0,Object(Ce.a)(s,2)[1])(r(n)),Object(Te.jsxs)("div",{className:"".concat(Fe.a.item," mb-4"),ref:n,draggable:!0,children:[Object(Te.jsx)(Ne.DragIcon,{type:"primary"}),Object(Te.jsx)(Ne.ConstructorElement,{isLocked:!1,text:e.item.name,price:e.item.price,thumbnail:e.item.image,handleClose:function(){return n=e.item,void t({type:E,id:n._id});var n}})]})},Le=n(27),Be=n.n(Le),Pe=function(){var e=Oe(),t=xe((function(e){return e.burgerIngredients})),n=t.constructorIngredients,a=t.currentBun,r=xe((function(e){return e.user})).isAuth,s=Object(he.h)(),i=Object(Me.a)({accept:"ingredient",drop:function(t){"bun"===t.type?e({type:I,draggedIngredient:t}):e({type:C,draggedIngredient:t})}}),o=Object(Ce.a)(i,2)[1],l=xe((function(e){return e.burgerIngredients.constructorIngredients})).reduce((function(e,t){return e+t.price}),0)+(a?2*a.price:0),u=Object(c.useMemo)((function(){return a?Object(Te.jsx)(Ne.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(a.name," (\u0432\u0435\u0440\u0445)"),price:a.price,thumbnail:a.image}):""}),[a]),m=Object(c.useMemo)((function(){return a?Object(Te.jsx)(Ne.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(a.name," (\u043d\u0438\u0437)"),price:a.price,thumbnail:a.image}):""}),[a]),b=function(){e({type:w,isOpen:!0})};return Object(Te.jsxs)("section",{className:Be.a.root,children:[Object(Te.jsxs)("div",{ref:o,className:"".concat(Be.a.list," "),children:[Object(Te.jsx)("div",{className:"".concat(Be.a.item," mb-4"),children:u}),Object(Te.jsx)("div",{className:"".concat(Be.a.scrollable," mb-4"),children:n.map((function(e,t){return Object(Te.jsx)(Ue,{item:e,index:t},t)}))}),Object(Te.jsx)("div",{className:"".concat(Be.a.item," mb-4"),children:m})]}),Object(Te.jsxs)("div",{className:"".concat(Be.a.total," mt-10"),children:[Object(Te.jsxs)("span",{className:"".concat(Be.a.totalSum," mr-10 text_type_digits-medium"),children:[l,Object(Te.jsx)(Ne.CurrencyIcon,{type:"primary"})]}),Object(Te.jsx)(Ne.Button,{type:"primary",size:"large",onClick:function(){r?null!=a&&n.length>0&&(e(function(e){var t="".concat(j,"/orders");return function(n){n({type:h});var c={ingredients:e.map((function(e){return e._id}))};fetch(t,{method:"POST",headers:{authorization:"".concat(_("accessToken")),"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){n({type:f,orderNumber:e.order.number}),n({type:S}),n({type:T})})).catch((function(e){n({type:g}),console.error("Error:",e)}))}}([a].concat(Object(d.a)(n),[a]))),b()):s("/login")},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},Ge=function(){return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:ve.a.container,children:[Object(Te.jsx)(De,{}),Object(Te.jsx)(Pe,{})]})})},We=n(19),qe=n(31),ze=n.n(qe),Je=function(){var e=Oe(),t=Object(he.h)(),n=xe((function(e){return e.user})).isAuth,a=Object(c.useState)({email:"",password:""}),r=Object(Ce.a)(a,2),s=r[0],i=r[1];Object(c.useEffect)((function(){n&&t("/")}),[n,t]);var o=function(e){i(Object(u.a)(Object(u.a)({},s),{},Object(We.a)({},e.target.name,e.target.value)))};return Object(Te.jsxs)("div",{className:ze.a.container,children:[Object(Te.jsx)("h1",{className:"".concat(ze.a.title," text text_type_main-medium mb-6"),children:"\u0412\u0445\u043e\u0434"}),Object(Te.jsxs)("form",{id:"login-form",className:ze.a.form,onSubmit:function(n){n.preventDefault(),e(function(e){var t=e.email,n=e.password;return function(e){e({type:ne}),fetch("".concat(j,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(t){t.success?(e({type:ae,isAuth:!0}),m("accessToken",t.accessToken,{expires:1200}),m("refreshToken",t.refreshToken,{})):e({type:ce})})).catch((function(t){e({type:ce})}))}}(Object(u.a)({},s))),t("/")},children:[Object(Te.jsx)(Ne.Input,{type:"email",name:"email",placeholder:"E-mail",value:s.email,onChange:o}),Object(Te.jsx)(Ne.PasswordInput,{name:"password",value:s.password,onChange:o}),Object(Te.jsx)(Ne.Button,{type:"primary",size:"large",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(Te.jsxs)("div",{className:ze.a.container_text,children:[Object(Te.jsxs)("div",{children:[Object(Te.jsxs)("span",{className:"text text_type_main-small text_color_inactive",children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"," "]}),Object(Te.jsx)(me.b,{to:"/register",className:"".concat(ze.a.link," text text_type_main-small"),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(Te.jsxs)("div",{children:[Object(Te.jsxs)("span",{className:"text text_type_main-small text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," "]}),Object(Te.jsx)(me.b,{to:"/forgot-password",className:"".concat(ze.a.link," text text_type_main-small"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})},He=n(48),Qe=n.n(He),Ve=function(){var e=Oe(),t=Object(he.h)(),n=xe((function(e){return e.user})).isAuth,a=Object(c.useState)({name:"",email:"",password:""}),r=Object(Ce.a)(a,2),s=r[0],i=r[1];n&&t("/");var o=function(e){i(Object(u.a)(Object(u.a)({},s),{},Object(We.a)({},e.target.name,e.target.value)))};return Object(Te.jsxs)("div",{className:Qe.a.container,children:[Object(Te.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(Te.jsxs)("form",{id:"registration-form",className:Qe.a.form,onSubmit:function(t){t.preventDefault(),e(function(e){var t=e.email,n=e.password,c=e.name;return function(e){e({type:ne}),fetch("".concat(j,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n,name:c})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(t){t.success?(e({type:ae,isAuth:!0}),m("accessToken",t.accessToken,{expires:1200}),m("refreshToken",t.refreshToken,{})):e({type:ce})})).catch((function(t){e({type:ce})}))}}(Object(u.a)({},s)))},children:[Object(Te.jsx)(Ne.Input,{name:"name",placeholder:"\u0418\u043c\u044f",onChange:o,value:s.name}),Object(Te.jsx)(Ne.Input,{type:"email",name:"email",placeholder:"E-mail",value:s.email,onChange:o}),Object(Te.jsx)(Ne.PasswordInput,{name:"password",value:s.password,onChange:o}),Object(Te.jsx)(Ne.Button,{type:"primary",size:"large",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(Te.jsxs)("div",{className:Qe.a.container_text,children:[Object(Te.jsxs)("span",{className:"text text_type_main-small text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," "]}),Object(Te.jsx)(me.b,{to:"/login",className:"".concat(Qe.a.link," text text_type_main-small"),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Xe=n(37),Ye=n.n(Xe),Ke=function(){var e=Oe(),t=Object(he.h)(),n=xe((function(e){return e.user})).isAuth,a=Object(c.useState)({email:""}),r=Object(Ce.a)(a,2),s=r[0],i=r[1];Object(c.useEffect)((function(){n&&t("/")}),[n,t]);return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:Ye.a.container,children:[Object(Te.jsx)("h1",{className:"".concat(Ye.a.title," text text_type_main-medium mb-6"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(Te.jsxs)("form",{id:"forgot-form",className:Ye.a.form,onSubmit:function(n){n.preventDefault(),e(function(e){var t=e.email;return function(e){e({type:ne}),fetch("".concat(j,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(t){t.success||e({type:ce})})).catch((function(t){e({type:ce})}))}}(Object(u.a)({},s))),t("/reset-password",{state:!0})},children:[Object(Te.jsx)(Ne.Input,{type:"email",name:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:s.email,onChange:function(e){i(Object(u.a)(Object(u.a)({},s),{},Object(We.a)({},e.target.name,e.target.value)))}}),Object(Te.jsx)(Ne.Button,{type:"primary",size:"large",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(Te.jsxs)("div",{className:Ye.a.container_text,children:[Object(Te.jsxs)("span",{className:"text text_type_main-small text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," "]}),Object(Te.jsx)(me.b,{to:"/login",className:"".concat(Ye.a.link," text text_type_main-small"),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Ze=n(38),$e=n.n(Ze),et=function(){var e=Oe(),t=Object(he.h)(),n=Object(he.g)(),a=xe((function(e){return e.user})).isAuth,r=Object(c.useState)({password:"",token:""}),s=Object(Ce.a)(r,2),i=s[0],o=s[1],l=Object(c.useState)(!1),d=Object(Ce.a)(l,2),_=d[0],m=d[1];Object(c.useEffect)((function(){a&&t("/"),n.state||t("/login")}),[a,n.state,t]);var b=function(e){o(Object(u.a)(Object(u.a)({},i),{},Object(We.a)({},e.target.name,e.target.value)))};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:$e.a.container,children:[Object(Te.jsx)("h1",{className:"".concat($e.a.title," text text_type_main-medium mb-6"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(Te.jsxs)("form",{id:"reset-form",className:$e.a.form,onSubmit:function(n){n.preventDefault(),e(function(e){var t=e.password,n=e.token;return function(e){e({type:ne}),fetch("".concat(j,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t,token:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(t){t.success||e({type:ce})})).catch((function(t){e({type:ce})}))}}(Object(u.a)({},i))),t("/login")},children:[Object(Te.jsx)(Ne.Input,{type:_?"text":"password",name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:i.password,onChange:b,icon:"ShowIcon",onIconClick:function(){m(!_)}}),Object(Te.jsx)(Ne.Input,{type:"text",name:"token",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:i.token,onChange:b}),Object(Te.jsx)(Ne.Button,{type:"primary",size:"large",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(Te.jsxs)("div",{className:$e.a.container_text,children:[Object(Te.jsxs)("span",{className:"text text_type_main-small text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," "]}),Object(Te.jsx)(me.b,{to:"/login",className:"".concat($e.a.link," text text_type_main-small"),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},tt=n(15),nt=n.n(tt),ct=function(e){var t=e.value,n=void 0===e.type?"text":e.type,r=e.name,s=e.placeholder,i=e.onChange,o=e.validateFunction,l=void 0===e.size?"default":e.size,d=Object(c.useState)(!1),u=Object(Ce.a)(d,2),j=u[0],_=u[1],m=Object(c.useState)(!0),b=Object(Ce.a)(m,2),p=b[0],O=b[1],x=a.a.useRef(null);return Object(Te.jsx)(Ne.Input,{type:n,name:r,placeholder:s,icon:"EditIcon",value:t,onChange:function(e){return i(e)},ref:x,onIconClick:function(){O(!1),setTimeout((function(){var e;return null===(e=x.current)||void 0===e?void 0:e.focus()}),0)},onBlur:function(e){e.target.value?function(e){Boolean(o)&&_(!o(e))}(e.target.value):_(!1),O(!0)},onFocus:function(){_(!1)},disabled:p,error:j,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:l})},at=n(55),rt=n.n(at),st=n(21),it=n.n(st),ot=n(210),lt=n(205),dt=n(211),ut=n(207),jt=function(e){var t=new Date,n=Object(ot.a)(t,1),c="";if(Object(lt.a)(e,t))c="\u0421\u0435\u0433\u043e\u0434\u043d\u044f";else if(Object(lt.a)(e,n))c="\u0412\u0447\u0435\u0440\u0430";else if(Object(dt.a)(t,e)<=7){var a=Object(dt.a)(t,e)<=5?"\u0434\u043d\u044f":"\u0434\u043d\u0435\u0439";c="".concat(Object(dt.a)(t,e)," ").concat(a," \u043d\u0430\u0437\u0430\u0434")}else c=Object(ut.a)(e,"dd.MM.yyyy");return c+=", ".concat(Object(ut.a)(e,"HH:mm")," i-").concat(Object(ut.a)(e,"O"))},_t=function(e){var t=e.orderItem,n=e.openModal,a=e.showStatus,r=void 0===a||a,s=xe((function(e){return e.burgerIngredients.ingredients})),i=[],o=0,l=t.ingredients.length>6,d=t.ingredients.length-6;t.ingredients.slice(0,6).forEach((function(e){var t=s.find((function(t){return t._id===e}));t&&(o+=t.price,i.push(t.image_mobile))}));var u=Object(c.useCallback)((function(e){var t={},n="";switch(e){case"created":n="\u0421\u043e\u0437\u0434\u0430\u043d";break;case"pending":n="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f";break;case"done":n="\u0417\u0430\u043a\u0430\u0437 \u0433\u043e\u0442\u043e\u0432",t.color="#00CCCC"}return Object(Te.jsx)("p",{className:"".concat(it.a.status," text text_type_main-default mb-6"),style:t,children:n})}),[]);return Object(Te.jsxs)("div",{className:"".concat(it.a.root," mb-4  p-6"),onClick:function(){return n(t)},children:[Object(Te.jsxs)("div",{className:"".concat(it.a.header," mb-6"),children:[Object(Te.jsxs)("span",{className:"".concat(it.a.number," text text_type_main-default"),children:["#",t.number]}),Object(Te.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:jt(new Date(t.createdAt))})]}),Object(Te.jsx)("p",{className:"".concat(it.a.name," text text_type_main-medium ").concat(r?"mb-2":"mb-6"),children:t.name}),r&&u(t.status),Object(Te.jsxs)("div",{className:it.a.container,children:[Object(Te.jsxs)("div",{className:it.a.icons,children:[i.map((function(e,t){return Object(Te.jsx)("img",{className:"".concat(it.a.icon," ").concat(5===t&&l&&it.a.iconMore),src:e,style:{zIndex:10-t},alt:""},t)})),l&&Object(Te.jsxs)("div",{className:"text text_type_main-default ".concat(it.a.moreItems),children:["+",d]})]}),Object(Te.jsxs)("div",{className:it.a.total,children:[Object(Te.jsx)("p",{className:"text text_type_digits-default mr-2",children:o}),Object(Te.jsx)(Ne.CurrencyIcon,{type:"primary"})]})]})]})},mt=function(e){var t=e.orderList,n=e.showStatus,a=e.componentMountedFrom,r=Oe(),s=Object(he.g)(),i=Object(he.h)(),o=Object(c.useCallback)((function(e){r({type:M,isOpen:!0}),r({type:Q,currentOrder:e});var t="";switch(a){case"feed":t="/feed/".concat(e._id);break;case"orders":t="/profile/orders/".concat(e._id)}i(t,{state:{background:s,header:e.number}})}),[r,i,s,a]),l="orders"===a?rt.a.list_orders:rt.a.list_feed;return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("ul",{className:"".concat(rt.a.list," ").concat(l),children:t&&t.map((function(e){return Object(Te.jsx)("li",{children:Object(Te.jsx)(_t,{orderItem:e,showStatus:n,openModal:o},e._id)},e._id)}))})})},bt=n(108),pt=n.n(bt),Ot=function(){return Object(Te.jsxs)("div",{className:pt.a.ldsRoller,children:[Object(Te.jsx)("div",{}),Object(Te.jsx)("div",{}),Object(Te.jsx)("div",{}),Object(Te.jsx)("div",{}),Object(Te.jsx)("div",{}),Object(Te.jsx)("div",{}),Object(Te.jsx)("div",{}),Object(Te.jsx)("div",{})]})},xt=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},ht=function(){var e=Oe(),t=Object(he.g)(),n=Object(he.h)(),a=Object(c.useState)(""),r=Object(Ce.a)(a,2),s=r[0],i=r[1],o=Object(c.useMemo)((function(){return{profile:"/profile"===t.pathname?nt.a.button_active:"",orders:"orders"===t.pathname.split("/")[2]?nt.a.button_active:""}}),[t.pathname]),l=xe((function(e){return e.user})).userData,d=Object(c.useState)({name:"",email:"",password:""}),m=Object(Ce.a)(d,2),p=m[0],O=m[1],x=Object(c.useState)(!1),h=Object(Ce.a)(x,2),f=h[0],g=h[1],N=Object(c.useState)({name:"",email:"",password:""}),y=Object(Ce.a)(N,2),v=y[0],C=y[1],E=function(e){g(!0),C(Object(u.a)(Object(u.a)({},v),{},Object(We.a)({},e.target.name,e.target.value)))},S=Object(c.useCallback)((function(){C({name:"",email:"",password:""}),g(!1)}),[]),I=Object(c.useCallback)((function(){e(function(e){var t=e.name,n=e.email,c=e.password;return function(e){var a={},r={name:t,email:n,password:c};for(var s in r)""!==r[s]&&(a[s]=r[s]);e({type:ne}),fetch("".concat(j,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json",authorization:"".concat(_("accessToken"))},body:JSON.stringify(Object(u.a)({},a))}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(t){t.success?e({type:re,userData:t.user}):e({type:ce})})).catch((function(t){e({type:ce})}))}}(Object(u.a)({},v))),g(!1)}),[e,v]),T=xe((function(e){return e.orders})),k=T.wsConnected,R=T.orders;Object(c.useEffect)((function(){switch(t.pathname){case"/profile":i("\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),JSON.stringify(l)===JSON.stringify({email:"",name:""})?e((function(e){e({type:ne}),fetch("".concat(j,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json",authorization:"".concat(_("accessToken"))}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(t){t.success?e({type:re,userData:t.user}):e({type:ce})})).catch((function(t){e({type:ce})}))})):O({name:l.name,email:l.email,password:""});break;case"/profile/orders":e($()),i("\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432")}return function(){"/profile/orders"===t.pathname&&e(ee())}}),[e,l,t.pathname]);return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:nt.a.container,children:[Object(Te.jsxs)("div",{className:nt.a.container_navigate,children:[Object(Te.jsx)(me.b,{to:"/profile",className:nt.a.button,children:Object(Te.jsx)("span",{className:"".concat(nt.a.button_text," ").concat(o.profile," text text_type_main-medium"),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(Te.jsx)(me.b,{to:"/profile/orders",className:nt.a.button,children:Object(Te.jsx)("span",{className:"".concat(nt.a.button_text," ").concat(o.orders," text text_type_main-medium"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(Te.jsx)(me.b,{to:"/logout",className:nt.a.button,onClick:function(t){t.preventDefault(),e((function(e){e({type:ne}),fetch("".concat(j,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:_("refreshToken")})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(t){t.success?(e({type:ae,isAuth:!1}),b("accessToken"),b("refreshToken")):e({type:ce})})).catch((function(t){e({type:ce})}))})),n("/login")},children:Object(Te.jsx)("span",{className:"".concat(nt.a.button_text," text text_type_main-medium"),children:"\u0412\u044b\u0445\u043e\u0434"})}),Object(Te.jsx)("span",{className:"".concat(nt.a.description," text text_type_main-small text_color_inactive"),children:s})]}),"/profile"===t.pathname&&Object(Te.jsxs)("form",{className:nt.a.form,children:[Object(Te.jsx)(ct,{name:"name",placeholder:"\u0418\u043c\u044f",value:""===v.name?p.name:v.name,onChange:E}),Object(Te.jsx)(ct,{type:"email",name:"email",placeholder:"E-mail",value:""===v.email?p.email:v.email,onChange:E,validateFunction:xt}),Object(Te.jsx)(ct,{type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:""===v.password?p.password:v.password,onChange:E}),f&&Object(Te.jsxs)("div",{className:nt.a.buttonsContainer,children:[Object(Te.jsx)(Ne.Button,{size:"medium",onClick:S,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(Te.jsx)(Ne.Button,{size:"medium",onClick:I,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]}),"orders"===t.pathname.split("/")[2]&&Object(Te.jsx)("div",{className:0!==R.orders.length?nt.a.order_list:nt.a.empty_order_list,children:0!==R.orders.length?Object(Te.jsx)(mt,{orderList:R.orders||[],showStatus:!0,componentMountedFrom:"orders"}):0===R.orders.length&&k?Object(Te.jsxs)("h3",{className:"text text_type_main-medium",children:["\u0412\u044b \u0435\u0449\u0451 \u043d\u0435 \u0441\u043e\u0432\u0435\u0440\u0448\u0438\u043b\u0438 \u0437\u0430\u043a\u0430\u0437. \u0414\u043b\u044f \u0437\u0430\u043a\u0430\u0437\u0430 \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"," ",Object(Te.jsx)(me.b,{to:"/",children:"\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430"})]}):Object(Te.jsx)(Ot,{})})]})})},ft=n(13),gt=n.n(ft),Nt=function(){var e=Oe(),t=xe((function(e){return e.orders})).orders,n=t.orders||[],a={done:[],pending:[]};return Object(c.useEffect)((function(){return e(K()),function(){e(Z())}}),[e]),n.forEach((function(e){"done"!==e.status&&"pending"!==e.status||a[e.status].push(e.number)})),Object(Te.jsxs)("section",{className:gt.a.root,children:[Object(Te.jsx)("h1",{className:"".concat(gt.a.title," text_type_main-large"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(Te.jsx)("div",{className:gt.a.orderList,children:0!==t.orders.length?Object(Te.jsx)(mt,{orderList:n,showStatus:!1,componentMountedFrom:"feed"}):Object(Te.jsx)("div",{className:gt.a.loader,children:Object(Te.jsx)(Ot,{})})}),Object(Te.jsxs)("div",{className:"".concat(gt.a.info),children:[Object(Te.jsxs)("div",{className:"".concat(gt.a.statusContainer),children:[Object(Te.jsxs)("div",{className:"".concat(gt.a.status),children:[Object(Te.jsx)("h2",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(Te.jsx)("ul",{className:gt.a.list,children:a&&a.done.map((function(e){return Object(Te.jsx)("li",{className:"text text_type_digits-default ".concat(gt.a.done),children:e},e)}))})]}),Object(Te.jsxs)("div",{className:gt.a.status,children:[Object(Te.jsx)("h2",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(Te.jsx)("ul",{className:gt.a.list,children:a&&a.pending.map((function(e){return Object(Te.jsx)("li",{className:"text text_type_digits-default ".concat(gt.a.pending),children:e},e)}))})]})]}),Object(Te.jsx)("p",{className:"text text_type_main-medium ".concat(gt.a.textShadow),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(Te.jsx)("p",{className:"text text_type_digits-large mb-15 ".concat(gt.a.textShadow),children:t.total}),Object(Te.jsx)("p",{className:"text text_type_main-medium ".concat(gt.a.textShadow),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(Te.jsx)("p",{className:"text text_type_digits-large ".concat(gt.a.textShadow),children:t.totalToday})]})]})},yt=n(56),vt=n.n(yt),Ct=function(){return Object(Te.jsx)("div",{className:vt.a.container,children:Object(Te.jsxs)("div",{className:vt.a.content,children:[Object(Te.jsx)("h1",{className:"text text_type_main-large",children:"Oops! 404 Error"}),Object(Te.jsx)("p",{className:"text text_type_main-default mt-5",children:"\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(Te.jsxs)("p",{className:"text text_type_main-default mt-3",children:["\u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430"," ",Object(Te.jsx)(me.b,{to:"/",className:vt.a.link,children:"\u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})]})]})})},Et=(n(57),function(){var e=xe((function(e){return e.user})).isAuth,t=Object(he.g)();return e?Object(Te.jsx)(he.b,{}):Object(Te.jsx)(he.a,{to:"/login",state:{from:t}})}),St=n(18),It=n.n(St),Tt=function(){var e=Object(he.g)(),t=Object(c.useMemo)((function(){return{home:"/"===e.pathname||"ingredients"===e.pathname.split("/")[1]?It.a.button_active:"",feed:"feed"===e.pathname.split("/")[1]?It.a.button_active:"",profile:"profile"===e.pathname.split("/")[1]?It.a.button_active:""}}),[e.pathname]),n="pt-4 pr-5 pb-4 pl-5 mr-2";return Object(Te.jsx)("header",{className:"".concat(It.a.header),children:Object(Te.jsxs)("nav",{className:It.a.nav,children:[Object(Te.jsxs)(me.b,{to:"/",className:"".concat(It.a.button," ").concat(n),children:[Object(Te.jsx)(Ne.BurgerIcon,{type:"primary"}),Object(Te.jsx)("span",{className:"".concat(It.a.button_text," ").concat(t.home," text_type_main-default"),children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(Te.jsxs)(me.b,{to:"/feed",className:"".concat(It.a.button," ").concat(n),children:[Object(Te.jsx)(Ne.ListIcon,{type:"secondary"}),Object(Te.jsx)("span",{className:"".concat(It.a.button_text," ").concat(t.feed," text_type_main-default"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]}),Object(Te.jsx)(me.b,{to:"/",className:It.a.logo,children:Object(Te.jsx)(Ne.Logo,{})}),Object(Te.jsxs)(me.b,{to:"/profile",className:"".concat(It.a.button," ").concat(n),children:[Object(Te.jsx)(Ne.ProfileIcon,{type:"secondary"}),Object(Te.jsx)("span",{className:"".concat(It.a.button_text," ").concat(t.profile," text_type_main-default"),children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},kt=n(58),Rt=n.n(kt),wt=n(109),Dt=n.n(wt),Mt=function(e){return Object(Te.jsx)("div",{className:Dt.a.root,onClick:e.onClick,children:e.children})},At=document.getElementById("modalRoot"),Ft=function(e){return Object(c.useEffect)((function(){var t=function(t){27!==t.keyCode&&"Escape"!==t.key||e.onClick()};return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}),[e]),At&&s.a.createPortal(Object(Te.jsx)(Mt,{onClick:e.onClick,children:Object(Te.jsxs)("div",{className:"".concat(Rt.a.root," pt-8 pb-8"),onClick:function(e){return e.stopPropagation()},children:[Object(Te.jsxs)("div",{className:"".concat(Rt.a.header),children:[e.header&&Object(Te.jsx)("h2",{className:e.header_style?e.header_style:"text_type_main-large",children:e.header}),Object(Te.jsx)("button",{className:Rt.a.closeButton,onClick:e.onClick,children:Object(Te.jsx)(Ne.CloseIcon,{type:"primary"})})]}),e.children]})}),At)},Ut=n(59),Lt=n.n(Ut),Bt=function(){var e=xe((function(e){return e.burgerIngredients.order})).orderNumber;return e?Object(Te.jsxs)("div",{className:Lt.a.root,children:[Object(Te.jsx)("h4",{className:"text_type_digits-large mt-1 mb-4",children:e}),Object(Te.jsx)("span",{className:"text_type_main-default",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(Te.jsx)("div",{className:"mb-8 mt-8",children:Object(Te.jsx)(Ne.CheckMarkIcon,{type:"secondary"})}),Object(Te.jsx)("span",{className:"text_type_main-small mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(Te.jsx)("span",{className:"text_type_main-small text_color_inactive mt-1 mb-8",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]}):Object(Te.jsx)("div",{className:"".concat(Lt.a.root," ").concat(Lt.a.loading," text_type_main-default"),children:Object(Te.jsx)(Ot,{})})},Pt=n(28),Gt=n.n(Pt),Wt=function(){var e=xe((function(e){return e.burgerIngredients})),t=e.currentIngredient,n=e.ingredients,a=xe((function(e){return e.modal})).isOpenModalIngredient,r=Object(he.i)().id,s=Object(c.useMemo)((function(){return null!==t?t:n.find((function(e){return e._id===r}))}),[t,n,r]),i=a?Gt.a.root_modal:Gt.a.root_page;return s?Object(Te.jsxs)("div",{className:i,children:[Object(Te.jsx)("img",{src:s.image_large,alt:""}),Object(Te.jsx)("h4",{className:"text_type_main-medium mb-8 mt-4",children:s.name}),Object(Te.jsxs)("div",{className:"".concat(Gt.a.info),children:[Object(Te.jsxs)("div",{className:"".concat(Gt.a.infoItem," mr-5"),children:[Object(Te.jsx)("span",{className:"text_type_main-default mb-2",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(Te.jsx)("span",{className:"text_type_digits-default",children:s.calories})]}),Object(Te.jsxs)("div",{className:"".concat(Gt.a.infoItem," mr-5"),children:[Object(Te.jsx)("span",{className:"text_type_main-default mb-2",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(Te.jsx)("span",{className:"text_type_digits-default",children:s.proteins})]}),Object(Te.jsxs)("div",{className:"".concat(Gt.a.infoItem," mr-5"),children:[Object(Te.jsx)("span",{className:"text_type_main-default mb-2",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(Te.jsx)("span",{className:"text_type_digits-default",children:s.fat})]}),Object(Te.jsxs)("div",{className:"".concat(Gt.a.infoItem),children:[Object(Te.jsx)("span",{className:"text_type_main-default mb-2",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(Te.jsx)("span",{className:"text_type_digits-default",children:s.carbohydrates})]})]})]}):Object(Te.jsx)(Te.Fragment,{})},qt=n(22),zt=n.n(qt),Jt=function(){var e=Object(he.g)(),t=Oe(),n=xe((function(e){return e.orders})),a=n.currentOrder,r=n.orders,s=xe((function(e){return e.modal})).isOpenModalOrderDetails,i=xe((function(e){return e.burgerIngredients.ingredients})),o=Object(he.i)().id,l={},d=a||r.orders.find((function(e){return e._id===o})),u=0;Object(c.useEffect)((function(){var n="feed"===e.pathname.split("/")[1],c="orders"===e.pathname.split("/")[2],a=!1;return n&&(a=!0,t(K())),c&&(a=!0,t($())),function(){n&&a?t(Z()):c&&a&&t(ee())}}),[t,e.pathname]),null===d||void 0===d||d.ingredients.forEach((function(e){var t=i.find((function(t){return t._id===e}));t&&!l[t._id]?l[t._id]={name:t.name,price:t.price,img:t.image_mobile,count:1}:t&&l[t._id]&&(l[t._id].count+=1),u+=t?t.price:0}));var j=Object(c.useCallback)((function(e){var t={},n="";switch(e){case"created":n="\u0421\u043e\u0437\u0434\u0430\u043d";break;case"pending":n="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f";break;case"done":n="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",t.color="#00CCCC"}return Object(Te.jsx)("p",{className:"".concat(zt.a.status," text text_type_main-default mb-6"),style:t,children:n})}),[]),_=Object(c.useCallback)((function(e){var t=[];for(var n in e)t.push(Object(Te.jsxs)("li",{className:zt.a.ingredient_info,children:[Object(Te.jsxs)("div",{className:zt.a.ingredient_icon_name,children:[Object(Te.jsx)("img",{className:"".concat(zt.a.ingredient_icon," mr-4"),src:e[n].img,alt:""}),Object(Te.jsx)("span",{className:"text text_type_main-default",children:e[n].name})]}),Object(Te.jsxs)("div",{className:zt.a.ingredient_qty_price,children:[Object(Te.jsx)("span",{className:"text text_type_digits-default",children:e[n].count}),Object(Te.jsx)("span",{className:"text text_type_main-default mr-2 ml-2",children:"x"}),Object(Te.jsx)("span",{className:"text text_type_digits-default mr-2",children:e[n].price}),Object(Te.jsx)(Ne.CurrencyIcon,{type:"primary"})]})]},n));return t}),[]);return d?Object(Te.jsx)("div",{className:s?zt.a.root_modal:zt.a.root_page,children:Object(Te.jsxs)("div",{children:[!s&&Object(Te.jsxs)("p",{className:"text text_type_digits-default mb-10 ".concat(zt.a.page_number),children:["#",d.number]}),Object(Te.jsx)("p",{className:"text text_type_main-medium ".concat(s?"mt-3 mb-1":"mb-3"),children:d.name}),j(d.status),Object(Te.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(Te.jsx)("ul",{className:"".concat(zt.a.ingredients_obj," mb-10 pr-6"),children:_(l)}),Object(Te.jsxs)("div",{className:zt.a.time_total,children:[Object(Te.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:jt(new Date(d.createdAt))}),Object(Te.jsxs)("div",{className:zt.a.total,children:[Object(Te.jsx)("span",{className:"text text_type_digits-default mr-2",children:u}),Object(Te.jsx)(Ne.CurrencyIcon,{type:"primary"})]})]})]})}):Object(Te.jsx)(Te.Fragment,{})},Ht=function(){var e=Oe(),t=Object(he.h)(),n=Object(he.g)(),a=xe((function(e){return e.burgerIngredients&&e.user})),r=a.isRequesting,s=a.isFailed,i=xe((function(e){return e.burgerIngredients})).ingredients;Object(c.useEffect)((function(){0===i.length&&e(function(){var e="".concat(j,"/ingredients");return function(t){t({type:p}),fetch(e).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(e){return t({type:O,data:e.data})})).catch((function(e){t({type:x}),console.log("Error: "+e.message)}))}}())}),[e,i.length]);var o=Boolean(_("refreshToken"));Object(c.useEffect)((function(){o&&e(_("refreshToken")&&_("accessToken")?function(e){e({type:ae,isAuth:!0})}:function(e){e({type:ne}),fetch("".concat(j,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:_("refreshToken")})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(t){t.success?(e({type:ae,isAuth:!0}),m("accessToken",t.accessToken,{expires:1200}),m("refreshToken",t.refreshToken,{})):e({type:ce})})).catch((function(t){e({type:ce})}))})}),[e,o]);var l="true"===_("isOpenIngredientModal");Object(c.useEffect)((function(){l&&e(A())}),[e,l]);var d=xe((function(e){return e.modal})),u=d.isOpenModalOrder,h=d.isOpenModalIngredient,f=d.isOpenModalOrderDetails,g=Object(c.useCallback)((function(){h&&(e((b("isOpenIngredientModal",{path:"/"}),{type:D,isOpen:!1})),e({type:v})),f&&(e({type:M,isOpen:!1}),e({type:V})),u&&(e({type:w,isOpen:!1}),e({type:N})),"/"!==n.pathname&&t(-1)}),[e,t,n.pathname,h,f,u]);switch(n.pathname.split("/")[1]){case"profile":case"feed":n.state=f?n.state:null}var y=n.state&&n.state.background;return Object(Te.jsxs)("div",{className:ge.a.root,children:[Object(Te.jsx)(Tt,{}),r&&!s&&Object(Te.jsx)("div",{className:"".concat(ge.a.loader," text_type_main-medium"),children:Object(Te.jsx)(Ot,{})}),s&&!r&&Object(Te.jsx)("div",{className:"".concat(ge.a.loader," text_type_main-medium"),children:"\u0423\u043f\u0441! \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a =("}),!r&&!s&&Object(Te.jsxs)("div",{className:ge.a.container,children:[Object(Te.jsxs)(he.e,{location:y||n,children:[Object(Te.jsx)(he.c,{path:"/",element:Object(Te.jsx)(Ge,{})}),Object(Te.jsx)(he.c,{path:"/ingredients/:id",element:Object(Te.jsx)(Wt,{})}),Object(Te.jsx)(he.c,{path:"/login",element:Object(Te.jsx)(Je,{})}),Object(Te.jsx)(he.c,{path:"/register",element:Object(Te.jsx)(Ve,{})}),Object(Te.jsx)(he.c,{path:"/forgot-password",element:Object(Te.jsx)(Ke,{})}),Object(Te.jsx)(he.c,{path:"/reset-password",element:Object(Te.jsx)(et,{})}),Object(Te.jsx)(he.c,{path:"/feed",element:Object(Te.jsx)(Nt,{})}),Object(Te.jsx)(he.c,{path:"/feed/:id",element:Object(Te.jsx)(Jt,{})}),Object(Te.jsxs)(he.c,{element:Object(Te.jsx)(Et,{}),children:[Object(Te.jsx)(he.c,{path:"/profile",element:Object(Te.jsx)(ht,{})}),Object(Te.jsx)(he.c,{path:"/profile/orders",element:Object(Te.jsx)(ht,{})}),Object(Te.jsx)(he.c,{path:"/profile/orders/:id",element:Object(Te.jsx)(Jt,{})})]}),Object(Te.jsx)(he.c,{path:"*",element:Object(Te.jsx)(Ct,{})})]}),(h||f)&&y&&Object(Te.jsxs)(he.e,{children:[Object(Te.jsx)(he.c,{path:"/ingredients/:id",element:Object(Te.jsx)(Ft,{onClick:g,header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(Te.jsx)(Wt,{})})}),Object(Te.jsx)(he.c,{path:"/feed/:id",element:Object(Te.jsx)(Ft,{onClick:g,header:"#".concat(n.state.header),header_style:"text_type_digits-default",children:Object(Te.jsx)(Jt,{})})}),Object(Te.jsx)(he.c,{path:"/profile/orders/:id",element:Object(Te.jsx)(Ft,{onClick:g,header:"#".concat(n.state.header),header_style:"text_type_digits-default",children:Object(Te.jsx)(Jt,{})})})]}),u&&Object(Te.jsx)(Ft,{onClick:g,header:"",children:Object(Te.jsx)(Bt,{})})]})]})};s.a.render(Object(Te.jsx)(a.a.StrictMode,{children:Object(Te.jsx)(i.a,{store:_e,children:Object(Te.jsx)(o.a,{backend:be.a,children:Object(Te.jsx)(me.a,{children:Object(Te.jsx)(Ht,{})})})})}),document.getElementById("root")),pe()},21:function(e,t,n){e.exports={root:"order-item_root__PQL-i",header:"order-item_header__2Q5Al",number:"order-item_number__2NOs9",name:"order-item_name__2_oZX",status:"order-item_status__39PoF",container:"order-item_container__VcpWs",icons:"order-item_icons__1RIF3",icon:"order-item_icon__TeHIJ",iconMore:"order-item_iconMore__TKE4r",moreItems:"order-item_moreItems__2Z4Xs",total:"order-item_total__1IMd3"}},22:function(e,t,n){e.exports={root_page:"order-item-details_root_page__2i3t9",page_number:"order-item-details_page_number__ZRJIl",root_modal:"order-item-details_root_modal__1frCM",cyan_color:"order-item-details_cyan_color__29KRe",ingredients_obj:"order-item-details_ingredients_obj__3BVKP",ingredient_info:"order-item-details_ingredient_info__1hSM2",ingredient_icon_name:"order-item-details_ingredient_icon_name__2wkYz",ingredient_icon:"order-item-details_ingredient_icon__1sjYF",ingredient_qty_price:"order-item-details_ingredient_qty_price__1KmGq",time_total:"order-item-details_time_total__1Lbn7",total:"order-item-details_total__3e325"}},27:function(e,t,n){e.exports={root:"burger-constructor_root__1kSmR",list:"burger-constructor_list__2lXaw",scrollable:"burger-constructor_scrollable__1zkqo",item:"burger-constructor_item__9YfeG",totalSum:"burger-constructor_totalSum__1Nxns",total:"burger-constructor_total__2z4fk"}},28:function(e,t,n){e.exports={root_modal:"ingredient-details_root_modal__3kxan",root_page:"ingredient-details_root_page__eSP5p",root:"ingredient-details_root__2LuS_",info:"ingredient-details_info__14J0F",infoItem:"ingredient-details_infoItem__VzdSY"}},31:function(e,t,n){e.exports={container:"login_container__2wyBj",title:"login_title__PmNb0",form:"login_form__3DD6c",container_text:"login_container_text__EmesW",link:"login_link__2bcVJ"}},37:function(e,t,n){e.exports={container:"forgot-password_container__2PAnB",title:"forgot-password_title__2-1yB",form:"forgot-password_form__2i2rR",container_text:"forgot-password_container_text__2438e",link:"forgot-password_link__1xRFL"}},38:function(e,t,n){e.exports={container:"reset-password_container__26YVY",title:"reset-password_title__iErbZ",form:"reset-password_form__1caBL",container_text:"reset-password_container_text__35UWB",link:"reset-password_link__2wk5C"}},46:function(e,t,n){e.exports={root:"app_root__2y0JE",container:"app_container__2GidD",loader:"app_loader__3kPmx"}},47:function(e,t,n){e.exports={card:"burger-ingredients-item_card__1wldH",price:"burger-ingredients-item_price__Mcqf0",name:"burger-ingredients-item_name__C8fHU",count:"burger-ingredients-item_count__133il"}},48:function(e,t,n){e.exports={container:"registraion_container__37SM3",title:"registraion_title__1yO0G",form:"registraion_form__vF46H",container_text:"registraion_container_text__3F18H",link:"registraion_link__19ONX"}},55:function(e,t,n){e.exports={list:"order-list_list__38FhK",list_orders:"order-list_list_orders__1apf4",list_feed:"order-list_list_feed__2V2us"}},56:function(e,t,n){e.exports={container:"not-found_container__qadSL",content:"not-found_content__2gHdE",link:"not-found_link__O8hxx"}},57:function(e,t,n){e.exports={container:"plug-page_container__2rMk9",content:"plug-page_content__253ck",link:"plug-page_link__2Apax"}},58:function(e,t,n){e.exports={root:"modal_root__QSEqe",header:"modal_header__2iX3r",closeButton:"modal_closeButton__2SoUT"}},59:function(e,t,n){e.exports={root:"order-details_root__2yQn2",loading:"order-details_loading__hsaTy"}},81:function(e,t,n){e.exports={selection_header:"burger-ingredients_selection_header__2kui5",card_container:"burger-ingredients_card_container__3O7yh"}}},[[199,1,2]]]);
//# sourceMappingURL=main.7e6110ae.chunk.js.map